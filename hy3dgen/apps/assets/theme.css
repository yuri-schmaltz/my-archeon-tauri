@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
@import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500&display=swap');

:root {
    /* --- Premium Color Palette (Dark Theme Default) --- */
    /* Primary Brand: Indigo/Violet */
    --primary-400: #818cf8;
    --primary-500: #6366f1;
    --primary-600: #4f46e5;
    --primary-700: #4338ca;

    /* Secondary Accent: Pink/Rose */
    --secondary-500: #ec4899;

    /* Semantic: Danger/Error */
    --danger-500: #ef4444;
    --danger-600: #dc2626;

    /* Surface & Backgrounds */
    --bg-app: #090B1F;
    /* Slate 900 -> changed to Custom Dark Blue */
    --bg-panel: #141829;
    /* Slightly lighter than bg-app for contrast */
    --bg-surface: #1e243d;
    /* Slate 700 -> Lighter variants */
    --bg-input: #090B1F;

    /* Text */
    --text-main: #f8fafc;
    /* Slate 50 */
    --text-muted: #cbd5e1;
    /* Slate 400 */
    --text-on-primary: #ffffff;

    /* Borders & Dividers */
    --border-subtle: rgba(255, 255, 255, 0.08);
    --border-highlight: rgba(255, 255, 255, 0.15);

    /* Dimensions */
    --radius-sm: 6px;
    --radius-md: 10px;
    --radius-lg: 16px;
    --radius-xl: 24px;

    /* Effects */
    --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.3);
    --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.3), 0 2px 4px -2px rgb(0 0 0 / 0.3);
    --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.4), 0 4px 6px -4px rgb(0 0 0 / 0.4);
    --glass-bg: rgba(9, 11, 31, 0.4);
    --glass-border: rgba(255, 255, 255, 0.05);
    --backdrop-blur: blur(16px);
}

/* --- Global Reset & Foundation --- */
* {
    box-sizing: border-box !important;
    scrollbar-width: thin !important;
    scrollbar-color: var(--primary-600) var(--bg-app) !important;
}

::-webkit-scrollbar {
    width: 8px !important;
    height: 8px !important;
    background: var(--bg-app) !important;
}

::-webkit-scrollbar-thumb {
    background: var(--primary-600) !important;
    border-radius: var(--radius-sm) !important;
}

::-webkit-scrollbar-thumb:hover {
    background: var(--primary-500) !important;
}

::-webkit-scrollbar-track {
    background: transparent !important;
}

html,
body {
    margin: 0 !important;
    padding: 0 !important;
    height: 100vh !important;
    width: 100vw !important;
    overflow: hidden !important;
    font-family: 'Inter', system-ui, sans-serif !important;
    background-color: var(--bg-app) !important;
    color: var(--text-main) !important;
    -webkit-font-smoothing: antialiased;
}

/* --- Gradio Container Structure --- */
.gradio-container {
    height: 100vh !important;
    max-height: 100vh !important;
    width: 100% !important;
    max-width: 100% !important;
    padding: 0 !important;
    margin: 0 !important;
    background: var(--bg-app) !important;
    display: flex !important;
    flex-direction: column !important;
    gap: 0 !important;
    overflow: hidden !important;
}

.main-row {
    flex-grow: 1 !important;
    height: 100% !important;
    gap: 0 !important;
    display: flex !important;
    overflow: hidden !important;
}

/* --- DEFINITIVE FULL SCREEN LAYOUT (WIDTH & HEIGHT FIX) --- */

/* 1. Global Width/Height Reset for Gradio Roots */
.gradio-container {
    height: 100vh !important;
    max-height: 100vh !important;
    width: 100vw !important;
    max-width: 100vw !important;
    display: flex !important;
    flex-direction: column !important;
    overflow: hidden !important;
}

.main-row {
    flex-grow: 1 !important;
    height: 100% !important;
    gap: 0 !important;
    display: flex !important;
    flex-direction: row !important;
    /* Default desktop row */
    overflow: hidden !important;
}

/* --- Left Column: Controls --- */
.left-col {
    background: var(--bg-app) !important;
    border-right: none !important;
    padding: 32px !important;
    height: 100% !important;
    overflow-y: auto !important;
    display: flex !important;
    flex-direction: column !important;
    gap: 28px !important;
    box-shadow: none !important;
    z-index: 10;
    /* Desktop: Fixed width or proportional, handled by Python scale but reset here just in case */
    min-width: 380px !important;
    width: 380px !important;
    /* Force width on desktop to prevent squashing */
    max-width: 450px !important;
}

/* --- Right Column: Viewer --- */
/* --- Right Column: Viewer --- */
.right-col {
    background: var(--bg-app) !important;
    height: 100% !important;
    position: relative !important;
    padding: 0 !important;
    flex-grow: 1 !important;
    display: flex !important;
    flex-direction: column !important;
    overflow: hidden !important;
    /* Flexbox fix for dynamic width content */
    width: 0 !important;
    min-width: 0 !important;
    flex-basis: 0 !important;
}

/* --- RESPONSIVE MEDIA QUERIES --- */

/* Tablet & Mobile (<= 1024px) */
@media (max-width: 1024px) {
    .main-row {
        flex-direction: column !important;
        overflow-y: auto !important;
        /* Allow vertical scroll for stacked layout */
        height: auto !important;
        /* Allow height to grow */
    }

    .gradio-container {
        overflow-y: auto !important;
        /* Container scroll */
    }

    .left-col {
        width: 100% !important;
        max-width: 100% !important;
        min-width: 0 !important;
        height: auto !important;
        /* Collapse height to content */
        padding: 24px !important;
        border-bottom: 1px solid var(--border-subtle) !important;
        flex-shrink: 0 !important;
        overflow-y: visible !important;
        /* Let container scroll */
    }

    .right-col {
        width: 100% !important;
        height: 60vh !important;
        /* Fixed height for viewer in stacked mode */
        min-height: 400px !important;
        flex-shrink: 0 !important;
        flex-grow: 0 !important;
    }
}

/* Mobile Specific (<= 768px) */
@media (max-width: 768px) {
    .left-col {
        padding: 16px !important;
        gap: 20px !important;
    }

    .right-col {
        height: 50vh !important;
        min-height: 350px !important;
    }

    /* Stack tabs buttons vertically if needed or scroll */
    .tabs {
        overflow-x: auto !important;
        flex-wrap: nowrap !important;
    }

    .tab-nav {
        overflow-x: auto !important;
        justify-content: flex-start !important;
        gap: 16px !important;
        padding-bottom: 8px !important;
    }

    /* Reduce button padding */
    button.primary {
        padding: 10px 16px !important;
    }

    /* Ensure generated result doesn't overflow */
    #gen_output_container {
        padding: 16px !important;
    }
}

/* 5. The Output Container */
#gen_output_container {
    display: flex !important;
    flex-direction: column !important;
    flex: 1 1 auto !important;
    height: auto !important;
    min-height: 0 !important;
    width: 100% !important;
    background: var(--bg-panel) !important;
    padding: 24px !important;
    padding-bottom: 48px !important;
    border-radius: 0 !important;
    overflow: hidden !important;
    position: relative !important;
}

/* 5b. Force Height Propagation */
#gen_output_container * {
    min-height: 0 !important;
    height: 100% !important;
    flex-grow: 1 !important;
    max-width: none !important;
    box-sizing: border-box !important;
}

/* 5c. Exception for SVG/Icons */
#gen_output_container svg,
#gen_output_container svg *,
#gen_output_container h3,
#gen_output_container p {
    height: auto !important;
    flex-grow: 0 !important;
    min-height: auto !important;
}

/* 6. Form/Block wrappers inside the panel */
#gen_mesh_panel>div,
#gen_mesh_panel .form,
#gen_mesh_panel .block,
#gen_mesh_panel .wrap {
    height: 100% !important;
    width: 100% !important;
    max-width: none !important;
    display: flex !important;
    flex-direction: column !important;
    flex-grow: 1 !important;
    border: none !important;
    padding: 0 !important;
    margin: 0 !important;
}

/* 7. The Model Viewer (HTML Component) */
#model_3d_viewer {
    flex-grow: 1 !important;
    display: flex !important;
    flex-direction: column !important;
    height: 100% !important;
    width: 100% !important;
    max-width: none !important;
    padding: 0 !important;
    margin: 0 !important;
    border: none !important;
}

/* 8. The Prose/Internal HTML Wrapper */
#model_3d_viewer .prose,
#model_3d_viewer .prose>div,
.prose {
    flex-grow: 1 !important;
    display: flex !important;
    flex-direction: column !important;
    height: 100% !important;
    width: 100% !important;
    max-width: none !important;
}

/* 9. The Iframe */
iframe {
    display: block !important;
    width: 100% !important;
    height: 100% !important;
    border: none !important;
    flex-grow: 1 !important;
}

/* --- Components: Placeholders --- */
.empty-placeholder {
    height: 100% !important;
    width: 100% !important;
    border-radius: var(--radius-lg) !important;
    border: 2px dashed var(--border-subtle) !important;
    display: flex !important;
    flex-direction: column !important;
    justify-content: center !important;
    align-items: center !important;
    background-color: transparent !important;
    transition: all 0.3s ease !important;
    padding: 24px !important;
}

.empty-placeholder-icon {
    display: flex !important;
    justify-content: center !important;
    align-items: center !important;
    width: 64px !important;
    height: 64px !important;
    background-color: rgba(99, 102, 241, 0.1) !important;
    border-radius: 50% !important;
    margin-bottom: 16px !important;
}

.empty-placeholder-icon svg {
    stroke: var(--primary-500) !important;
}

.empty-placeholder-title {
    font-size: 1.125rem !important;
    font-weight: 600 !important;
    color: var(--text-main) !important;
    margin: 0 0 8px 0 !important;
}

.empty-placeholder-text {
    font-size: 0.875rem !important;
    color: var(--text-muted) !important;
    margin: 0 !important;
    text-align: center !important;
    max-width: 260px !important;
}